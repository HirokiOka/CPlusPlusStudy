# ポインター

- 意味上のポインター
- 文法上のポインター
- ポインターの内部実装

## 意味上のポインター
ポインターはオブジェクトを参照するための機能で，この点においてリファレンスと同じ機能を提供している．
(T型のリファレンスはT型のオブジェクトそのものではなく，T型のオブジェクトへの参照である．リファレンスへの操作は，参照したオブジェクトへの操作になる．)

- T型へのリファレンスはT型のオブジェクトを参照する(T &)
- T型へのポインターはT型のオブジェクトを参照する(T \*)


- 初期化

リファレンス

```cpp
int object{};
int &reference = object;
```

ポインター

```cpp
int object{};
int *pointer = &object;
```

- ポインターの場合，参照したい変数名に&をつける必要がある．

- オブジェクトの操作

リファレンス

```cpp
reference = 0; //書き込み
int read = reference; //読み込み
```

ポインター

```cpp
*pointer = 0; //読み込み
int read = *pointer; //書き込み
```

- \*をつける必要がある
- ポインター名をそのまま使った場合，参照先のオブジェクトの値ではなく，ポインターという値になる

すなわち，リファレンスはポインターのsyntax sugarである

## リファレンスとポインターの違い

### 代入
- リファレンスは代入できないが，ポインターは代入ができる

```cpp
int x;
int y;

int &reference = x;
reference = y;     //これはxの値がyになるだけ

int *pointer = &x;
pointer = &y;      //pointerの参照先がyになる
```

### 初期化
- リファレンスは必ず初期化しなければならない
- ポインターは宣言だけでもよい
- 分からない値を持ったポインターの参照先への読み書きは未定義の挙動を起こす(!) <- 恐い

```cpp
int *pointer;
std::cout << *pointer; //未定義の挙動
*pointer = 123; //未定義の挙動
```

### nullptr
- 何も参照していないことを明示的に示すためのポインターの値(nullptr)

```cpp
int *pointer = nullptr;
```

- C/C++では歴史的な理由から，`NULL`や`0`もnullポインター値として扱う
